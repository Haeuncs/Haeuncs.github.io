{"componentChunkName":"component---src-templates-blog-post-js","path":"/2019-12-10-SwiftUI Animation/","result":{"data":{"site":{"siteMetadata":{"title":"@_@"}},"markdownRemark":{"id":"41c5b0da-b628-5810-89e4-f72c07e1dae8","excerpt":"새로바뀐 SwiftUI 에서는 어떻게 Animation이 작동할까요?!\n기존 Swift 에서 Animation을 그릴 때는 UIView.animate or animateKeyframes 을 사용했었습니다. SwiftUI 는 Animation (Apple 공식 문서) Structure…","html":"<p>새로바뀐 SwiftUI 에서는 어떻게 Animation이 작동할까요?!\n기존 Swift 에서 Animation을 그릴 때는 UIView.animate or animateKeyframes 을 사용했었습니다.</p>\n<p>SwiftUI 는 <a href=\"https://%20developer.apple.com/documentation/swiftui/animation\">Animation (Apple 공식 문서)</a> Structure 을 사용하여 애니메이션을 정의합니다.</p>\n<p>공식 문서를 보면 Method 가 나와있는데 Swift 에서 animate하나로 정의 하던 option 이나 delay 가 각각의 Method 로 나눠졌습니다.</p>\n<p>이제 이 animation을 가지고 만들어봅시다 😲</p>\n<h1>Goal💡</h1>\n<blockquote>\n<p>Naver Clova 앱의 사용자에게 마이크 입력값을 받는 뷰에 나타나는 애니메이션과 비슷하게 만들어 봅니다.</p>\n</blockquote>\n<img src=\"/67ad24bf14f136541e6146048d8320a2/2.gif\">\n<p>제가 봤을 때는 Spring 애니메이션을 적용한 거 같아서 Spring으로 애니메이션을 구현해봤습니다.</p>\n<p>먼저 4개의 Rectangle 이 움직이는 애니메이션을 만들어 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token comment\">// 1</span>\n<span class=\"token builtin\">ZStack</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 2</span>\n  <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">frame</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">110</span><span class=\"token punctuation\">,</span>height<span class=\"token punctuation\">:</span><span class=\"token number\">110</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">foregroundColor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Color</span><span class=\"token punctuation\">.</span>custom<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>onAppear <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>pulse<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 3</span>\n  <span class=\"token builtin\">HStack</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">ForEach</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">:</span> \\<span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token number\">_</span> <span class=\"token keyword\">in</span>\n    <span class=\"token comment\">//4</span>\n      <span class=\"token function\">Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">frame</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> alignment<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">cornerRadius</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">scaleEffect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>pulse <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomFloat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">animation</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Animation</span><span class=\"token punctuation\">.</span><span class=\"token function\">spring</span><span class=\"token punctuation\">(</span>dampingFraction<span class=\"token punctuation\">:</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">speed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">repeatForever</span><span class=\"token punctuation\">(</span>autoreverses<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">foregroundColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>1: ZStack으로 뷰가 layering 되도록 해준 후<br/>\n2: Circle() 으로 기본 타원을 그립니다.<br/>\n3: 그 다음 HStack 으로 Horizontal Stack 을 만들어 ForEach로 loop되도록 한 후<br/>\n4: Rectangle() 을 그리는데 scaleEffect로 x는 그대로인 상태이고 pulse boolean 변수가 true일 때 랜덤 Float 크기 만큼 변하게 작성하여 y축으로만 커지도록 작성합니다.<br/>\n그 다음 animation 은 Spring 으로, speed 는 랜덤값으로 그리고 계속 반복할 수 있도록 repeat 을 작성해줍니다.<br/></p>\n<p>결과</p>\n<img src=\"/c05153caca6dbdb28dfaf1077e386a8b/3.gif\">\n<p>같은 방법으로 중앙 버튼 외곽에 나타나는 배경 애니메이션도 추가해봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token builtin\">ZStack</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token builtin\">VStack</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">frame</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">110</span><span class=\"token punctuation\">,</span>height<span class=\"token punctuation\">:</span><span class=\"token number\">110</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foregroundColor</span><span class=\"token punctuation\">(</span><span class=\"token function\">Color</span><span class=\"token punctuation\">(</span>#<span class=\"token function\">colorLiteral</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">:</span> <span class=\"token number\">0.3490196078</span><span class=\"token punctuation\">,</span> green<span class=\"token punctuation\">:</span> <span class=\"token number\">0.7725490196</span><span class=\"token punctuation\">,</span> blue<span class=\"token punctuation\">:</span> <span class=\"token number\">0.537254902</span><span class=\"token punctuation\">,</span> alpha<span class=\"token punctuation\">:</span> <span class=\"token number\">0.2390113902</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">scaleEffect</span><span class=\"token punctuation\">(</span>pulse <span class=\"token operator\">?</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token function\">randomPulse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">animation</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Animation</span><span class=\"token punctuation\">.</span><span class=\"token function\">spring</span><span class=\"token punctuation\">(</span>dampingFraction<span class=\"token punctuation\">:</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">repeatForever</span><span class=\"token punctuation\">(</span>autoreverses<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token builtin\">VStack</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">frame</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">110</span><span class=\"token punctuation\">,</span>height<span class=\"token punctuation\">:</span><span class=\"token number\">110</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foregroundColor</span><span class=\"token punctuation\">(</span><span class=\"token function\">Color</span><span class=\"token punctuation\">(</span>#<span class=\"token function\">colorLiteral</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">:</span> <span class=\"token number\">0.3490196078</span><span class=\"token punctuation\">,</span> green<span class=\"token punctuation\">:</span> <span class=\"token number\">0.7725490196</span><span class=\"token punctuation\">,</span> blue<span class=\"token punctuation\">:</span> <span class=\"token number\">0.537254902</span><span class=\"token punctuation\">,</span> alpha<span class=\"token punctuation\">:</span> <span class=\"token number\">0.1419392523</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">scaleEffect</span><span class=\"token punctuation\">(</span>pulse <span class=\"token operator\">?</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token function\">randomPulse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">animation</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Animation</span><span class=\"token punctuation\">.</span><span class=\"token function\">spring</span><span class=\"token punctuation\">(</span>dampingFraction<span class=\"token punctuation\">:</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">repeatForever</span><span class=\"token punctuation\">(</span>autoreverses<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">Button</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">ZStack</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">frame</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">110</span><span class=\"token punctuation\">,</span>height<span class=\"token punctuation\">:</span><span class=\"token number\">110</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">foregroundColor</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Color</span><span class=\"token punctuation\">.</span>custom<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span>onAppear <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>pulse<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token builtin\">HStack</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">ForEach</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">:</span> \\<span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token number\">_</span> <span class=\"token keyword\">in</span>\n          <span class=\"token function\">Rectangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">frame</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> alignment<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">cornerRadius</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">scaleEffect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>pulse <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomFloat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">animation</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Animation</span><span class=\"token punctuation\">.</span><span class=\"token function\">spring</span><span class=\"token punctuation\">(</span>dampingFraction<span class=\"token punctuation\">:</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">.</span><span class=\"token function\">speed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">randomDouble</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">.</span><span class=\"token function\">repeatForever</span><span class=\"token punctuation\">(</span>autoreverses<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">foregroundColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>최종 결과</p>\n<img src=\"/41199968274b2eb0c67851f3aec78d9c/4.gif\">\n<h2>Any question?🙋‍</h2>\n<p>코드에 문제가 있거나 어떤 질문이든 편하게 메일을 보내주세요!</p>\n<p>Please email me with any questions or concerns! 😃<br/>\n💌 : haeun.developer@gmail.com</p>","frontmatter":{"title":"SwiftUI Animation 을 가지고 놀아보자 🤠","date":"December 10, 2019","description":"SwiftUI Animation 을 가지고 놀아보자"}}},"pageContext":{"slug":"/2019-12-10-SwiftUI Animation/","previous":{"fields":{"slug":"/2019-12-08-TIL_SwiftUI로 앱 완성하기/"},"frontmatter":{"title":"TIL_Day01_SwiftUI로 앱 완성하기"}},"next":{"fields":{"slug":"/2020-01-07-Swift Animate change frame not working in iOS 13/"},"frontmatter":{"title":"Change frame not working in iOS 13 🤠"}}}}}