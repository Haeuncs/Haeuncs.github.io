{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021/CleanSwift/","result":{"data":{"site":{"siteMetadata":{"title":"방가방가"}},"markdownRemark":{"id":"d1668ca0-dab1-522f-aa01-72d64c74c428","excerpt":"Clean Swift  Clean Architecture 에서 나온 Architecture인 Clean Swift는 위와 같은 view - interactor - presenter 즉 VIP cycle 을 가진 architecture이다. Clean swift…","html":"<h1 id=\"clean-swift\" style=\"position:relative;\"><a href=\"#clean-swift\" aria-label=\"clean swift permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clean Swift</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/59256c1a344d76352b683c63345d51bf/cc418/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbElEQVQoz5VRTUsCURR98wWGzlQjItkHY2ghBi2qRUXQypEg+iYFMQJr3EsYgVHZL3DlCLZy68JlRKtsIsE21Upbqbv8DSd8oiEk0uJw4bx7zrnvXkIIwX/BMAytHo8H+Xweuq6jUChAVdUW325iWRZ2ux2y1Uqr2Wzub8i2DUfkURwFQjg5DGN7dwdOpxOE53n66Bhz4KlYxOP9A97KZWiaRnlBEGgYx3HdyQagl5iy2MAzHAjTXzRqlTE/48WKdwHisES5bmD8PI547Aw21gLtOIK7bBY3t0kotnGsL60iradxmUhAz2SwtriMuUk3KpUKPt8/0PxuIpfLdQ1pYCAYxMHePgTCwK/6kUxc4Tp2AckiwqVMQ9NOEQmFEY1qmFVccDsUGIaB11IJ1a8qUqlU9wZ/frkDkR8Cx3K00SVP/E5ACEwmEyRJgiiKdMc92pag495ZPsu3xVsbm6jVa3h5NtBo1KH6fAOP8gMszuwxXKtA5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Clean%20Swift%202f3b91a6e2924184823295c0a2a24a8b/Untitled.png\"\n        title=\"Clean%20Swift%202f3b91a6e2924184823295c0a2a24a8b/Untitled.png\"\n        src=\"/static/59256c1a344d76352b683c63345d51bf/fcda8/Untitled.png\"\n        srcset=\"/static/59256c1a344d76352b683c63345d51bf/12f09/Untitled.png 148w,\n/static/59256c1a344d76352b683c63345d51bf/e4a3f/Untitled.png 295w,\n/static/59256c1a344d76352b683c63345d51bf/fcda8/Untitled.png 590w,\n/static/59256c1a344d76352b683c63345d51bf/efc66/Untitled.png 885w,\n/static/59256c1a344d76352b683c63345d51bf/c83ae/Untitled.png 1180w,\n/static/59256c1a344d76352b683c63345d51bf/cc418/Untitled.png 1992w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Clean Architecture 에서 나온 Architecture인 Clean Swift는 위와 같은 view - interactor - presenter 즉 VIP cycle 을 가진 architecture이다.</p>\n<h1 id=\"clean-swift-의-제어흐름\" style=\"position:relative;\"><a href=\"#clean-swift-%EC%9D%98-%EC%A0%9C%EC%96%B4%ED%9D%90%EB%A6%84\" aria-label=\"clean swift 의 제어흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clean swift 의 제어흐름</h1>\n<p>위의 그림에서 나타낸 제어 흐름을 글로 설명하면</p>\n<ol>\n<li>view에서 interactor 에게 business logic 을 요청</li>\n<li>interactor는 business logic 또는 business logic 을 수행하는 worker 에게 도움을 요청</li>\n<li>worker 에서 networking, database 등 business를 다루고 작업이 완료</li>\n<li>완료된 작업을 interactor는 presenter를 호출하여 view에 표시</li>\n</ol>\n<p>와 같이 동작한다.</p>\n<p>이러한 모든 작업은 interactor가 presenter 에게 종속되지 않도록 의존성을 되돌리기 위해 swift protocol 을 사용한다.</p>\n<p>즉 interactor가 presenter 에 의존하는 것이 아닌 protocol에 선언된 메서드를 호출한다.</p>\n<h1 id=\"clean-swift-component\" style=\"position:relative;\"><a href=\"#clean-swift-component\" aria-label=\"clean swift component permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clean Swift Component</h1>\n<h3 id=\"view\" style=\"position:relative;\"><a href=\"#view\" aria-label=\"view permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>View</h3>\n<ul>\n<li>뷰에 관련된 로직만 처리</li>\n<li>비지니스 로직 관련은 interactor에게 요청</li>\n</ul>\n<h3 id=\"interactor\" style=\"position:relative;\"><a href=\"#interactor\" aria-label=\"interactor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Interactor</h3>\n<ul>\n<li>business logic 수행</li>\n<li>요청된 것이 완료되면 Presenter에게 데이터를 전송</li>\n</ul>\n<h3 id=\"presenter\" style=\"position:relative;\"><a href=\"#presenter\" aria-label=\"presenter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Presenter</h3>\n<ul>\n<li>interactor로부터 데이터를 받아서 UI를 위한 모델로 가공</li>\n<li>가공된 모델을 View에게 전달\n<ul>\n<li>presenter 에서 간단한 포맷팅을 하거나 worker 에게 포맷팅 작업을 인계할 수 있다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"worker\" style=\"position:relative;\"><a href=\"#worker\" aria-label=\"worker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Worker</h3>\n<ul>\n<li>interactor에서 수행해야하는 business logic 들이 실제 수행되는 곳이다.</li>\n</ul>\n<h3 id=\"model\" style=\"position:relative;\"><a href=\"#model\" aria-label=\"model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Model</h3>\n<p><img src=\"CleanSwift/Untitled%201.png\" alt=\"Clean%20Swift%202f3b91a6e2924184823295c0a2a24a8b/Untitled%201.png\"></p>\n<ul>\n<li>\n<p>request, response, viewmodel 를 struct 로 표현한다.</p>\n<ol>\n<li>\n<p>Request</p>\n<p>view controller 와 request model을 구성하고 interator에게 전달request model은 text field의 텍스트 입력, picker 에서 선택된 값과 같은 user input들이 대부분 포함된다</p>\n</li>\n<li>\n<p>Response</p>\n<p>interactor 가 request에 대한 작업을 마친 후, response model에서 result를 캡슐화하고 presenter 로 전달한다.</p>\n</li>\n<li>\n<p>View Model</p>\n<p>Presenter 가 Interactor로부터 response를 받은 후 string, int 와 같은 raw data 유형으로 결과를 포맷하여 view model로 넣는다. 그런 다음 view model을 다시 view controller 로 전달하여 디스플레이 한다.</p>\n</li>\n</ol>\n</li>\n<li>\n<p>raw data model을 사용하는 것이 아닌 이러한 struct 구조의 data model을 사용하여 얻는 이점</p>\n<ul>\n<li>business logic 이 변경되여 기본 데이터 모델이 변경될 때, 코드 베이스 전체를 업데이트할 필요가 없다.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h1>\n<ul>\n<li>VIP Cycle 을 도입하여 단방향의 제어흐름을 갖게해준다.</li>\n<li>protocol 을 이용해 구현되어 있기 때문에 모의 데이터를 이용한 unit test가 쉽다.</li>\n</ul>\n<p><a href=\"https://github.com/Clean-Swift/CleanStore\">https://github.com/Clean-Swift/CleanStore</a></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#clean-swift\">Clean Swift</a></p>\n</li>\n<li>\n<p><a href=\"#clean-swift-%EC%9D%98-%EC%A0%9C%EC%96%B4%ED%9D%90%EB%A6%84\">Clean swift 의 제어흐름</a></p>\n</li>\n<li>\n<p><a href=\"#clean-swift-component\">Clean Swift Component</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#view\">View</a></li>\n<li><a href=\"#interactor\">Interactor</a></li>\n<li><a href=\"#presenter\">Presenter</a></li>\n<li><a href=\"#worker\">Worker</a></li>\n<li><a href=\"#model\">Model</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></p>\n</li>\n</ul>","frontmatter":{"title":"Clean Swift","date":"2021年03月07日","description":"Clean Swift Architecture"}}},"pageContext":{"slug":"/2021/CleanSwift/","previous":{"fields":{"slug":"/2021-cleancode-1/CleanCode7/"},"frontmatter":{"title":"[Clean Code] 7.오류 처리"},"tableOfContents":"<ul>\n<li><a href=\"#%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C-7%EC%9E%A5-%EC%98%A4%EB%A5%98-%EC%B2%98%EB%A6%AC\">클린코드 7장 오류 처리</a></li>\n<li><a href=\"#%EC%98%A4%EB%A5%98-%EC%BD%94%EB%93%9C%EB%B3%B4%EB%8B%A4-%EC%98%88%EC%99%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC\">오류 코드보다 예외를 사용하라</a></li>\n<li><a href=\"#try-catch-finally-%EB%AC%B8%EB%B6%80%ED%84%B0-%EC%9E%91%EC%84%B1%ED%95%98%EB%9D%BC\">Try-Catch-Finally 문부터 작성하라</a></li>\n<li><a href=\"#%EB%AF%B8%ED%99%95%EC%9D%B8-%EC%98%88%EC%99%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC\">미확인 예외를 사용하라</a></li>\n<li><a href=\"#%EC%98%88%EC%99%B8%EC%97%90-%EC%9D%98%EB%AF%B8%EB%A5%BC-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%9D%BC\">예외에 의미를 제공하라</a></li>\n<li><a href=\"#%ED%98%B8%EC%B6%9C%EC%9E%90%EB%A5%BC-%EA%B3%A0%EB%A0%A4%ED%95%B4-%EC%98%88%EC%99%B8-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%A5%BC-%EC%A0%95%EC%9D%98%ED%95%98%EB%9D%BC\">호출자를 고려해 예외 클래스를 정의하라</a></li>\n<li><a href=\"#%EC%A0%95%EC%83%81-%ED%9D%90%EB%A6%84%EC%9D%84-%EC%A0%95%EC%9D%98%ED%95%98%EB%9D%BC\">정상 흐름을 정의하라</a></li>\n<li><a href=\"#null%EC%9D%84-%EB%B0%98%ED%99%98%ED%95%98%EC%A7%80-%EB%A7%88%EB%9D%BC\">null을 반환하지 마라</a></li>\n<li><a href=\"#null%EC%9D%84-%EC%A0%84%EB%8B%AC%ED%95%98%EC%A7%80-%EB%A7%88%EB%9D%BC\">null을 전달하지 마라</a></li>\n<li><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></li>\n</ul>"},"next":{"fields":{"slug":"/2022/2022/"},"frontmatter":{"title":"2022"},"tableOfContents":"<ul>\n<li><a href=\"#%EB%B2%8C%EC%8D%A8-7%EC%9B%94\">벌써 7월</a></li>\n</ul>"}}},"staticQueryHashes":["426816048","63159454"]}