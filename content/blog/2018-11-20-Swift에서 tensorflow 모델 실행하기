---
title: Swift로 ios에서 tensorflow 모델 실행하기
date: 2018-11-20 00:00:00
categories:
- Swift
tags:
- Swift
- 스위프트
- tensorflow
---

 ## 내가 생성한 데이터를 학습하고 모바일에서 실행하기

 기본적으로 ios에서 실행하기까지의 과정은


1. 데이터 생성
2. 생성된 데이터 tfrecord로 변환
3. 데이터 학습
4. 학습된 데이터 pb로 저장
5. pb를 tflite로 변환
6. tflite 빌드 디렉토리에 저장
7. firebase 라이브러리로 tflite 실행


으로 정리할 수 있다.

여기서 나는 예제로 딥러닝에서 hello world 와 같은 의미를 갖는 mnist 숫자 추론과 이론적으로 동일한 방식의 한글 추론을 만들어 보았다.

완성된 실행결과는 다음과 같다.

(사진)

# 1. 데이터 생성
본인이 학습하는 데이터를 사진과 그 사진에 대응되는 레이블을 저장한다
<br/>
예로들어 내가 만든 한글 학습 데이터의 경우에는 <br/>
처음에는 모든 한글을 유니코드로 조합하여 ttf 폰트 파일에서 -> png 이미지로 변환하여 데이터를 생성하였는데
유니코드 조합이 굉장히 많을 뿐더러 ttf 폰트 파일마다 지원하는 텍스트 양이 달라서 포기했다.
<br/>
보통 폰트를 만드는데 2,350자 가 쓰이거나 11,172 자 가 쓰이고
2350자의 데이터를 생성하였다.<br/>
<br/>
한글 데이터 png를 생성함과 동시에 파일이름을 대응되는 한글 형식으로 저장하였다.

# 2. 생성된 데이터 tfrecord로 변환하기
참고 사이트
[tensorflow github](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/how_tos/reading_data/convert_to_records.py)

# 3. 데이터 학습하기
CNN 합성곱 신경망으로 학습
