{"expireTime":9007200848448148000,"key":"transformer-remark-markdown-html-ast-9cd0d46ffa4374071db0b6573a77e510-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Swift 를 개발하면서 TextView의 textAlignment를 center로 사용해본 적이 없었기 때문에 이 버그를 이번에 처음 알게 되었습니다.","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":86,"offset":87}}}],"position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":86,"offset":87}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이슈 ticket을 받고 디버그를 찍어보고, playground 에서 demo 프로젝트를 만들면서 이 버그가 기본 버그라는 것을 알게 되었습니다.","position":{"start":{"line":5,"column":1,"offset":89},"end":{"line":5,"column":82,"offset":170}}}],"position":{"start":{"line":5,"column":1,"offset":89},"end":{"line":5,"column":82,"offset":170}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"버그는 쉽게 볼 수 있습니다.","position":{"start":{"line":7,"column":1,"offset":172},"end":{"line":7,"column":17,"offset":188}}}],"position":{"start":{"line":7,"column":1,"offset":172},"end":{"line":7,"column":17,"offset":188}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  \nimport UIKit\nimport PlaygroundSupport\n\nclass MyViewController : UIViewController {\n    override func loadView() {\n        let view = UIView()\n        view.backgroundColor = .white\n\n        let label = UITextView()\n        label.frame = CGRect(x: 150, y: 200, width: 200, height: 200)\n        label.textAlignment = .center\n        label.textColor = .black\n        label.backgroundColor = .brown\n        \n        view.addSubview(label)\n\n\n        self.view = view\n    }\n}</code></pre></div>","position":{"start":{"line":9,"column":1,"offset":190},"end":{"line":33,"column":4,"offset":671}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기본 UITextView의 이미지처럼 2줄의 텍스트를 입력하고 1줄에서 줄바꿈을 하면?! 이렇게 cursor 위치가 center 가 아닌 left로 이동합니다.","position":{"start":{"line":35,"column":1,"offset":673},"end":{"line":35,"column":90,"offset":762}}}],"position":{"start":{"line":35,"column":1,"offset":673},"end":{"line":35,"column":90,"offset":762}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 버그를 구글링을 하다보면 가장 유명한 (애초에 버그 report가 몇 개 없다)","position":{"start":{"line":37,"column":1,"offset":764},"end":{"line":37,"column":47,"offset":810}}},{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/26524431/uitextview-alignment-caret-goes-left/53295470#53295470"},"children":[{"type":"text","value":"stackoverflow","position":{"start":{"line":37,"column":48,"offset":811},"end":{"line":37,"column":61,"offset":824}}}],"position":{"start":{"line":37,"column":47,"offset":810},"end":{"line":37,"column":163,"offset":926}}},{"type":"text","value":"와 같은 해결 방법이 나옵니다.","position":{"start":{"line":37,"column":163,"offset":926},"end":{"line":37,"column":180,"offset":943}}}],"position":{"start":{"line":37,"column":1,"offset":764},"end":{"line":37,"column":180,"offset":943}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"해결 방법은 앞서 설명한 버그를 실행시키는 경우를 대비하여 작성된 코드이다. 현재 상태를 판단해서 중앙으로 cursor 를 위치하게 하는 코드입니다.","position":{"start":{"line":39,"column":1,"offset":945},"end":{"line":39,"column":84,"offset":1028}}}],"position":{"start":{"line":39,"column":1,"offset":945},"end":{"line":39,"column":84,"offset":1028}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 fix 의 문제는 ","position":{"start":{"line":41,"column":1,"offset":1030},"end":{"line":41,"column":13,"offset":1042}}},{"type":"raw","value":"<code class=\"language-text\">NSLocationInRange(NSMaxRange(rangeOfCharAfterCaret), fullRange)</code>","position":{"start":{"line":41,"column":13,"offset":1042},"end":{"line":41,"column":82,"offset":1111}}},{"type":"text","value":" 를 사용해서 판단하는데 허점이 있습니다.","position":{"start":{"line":41,"column":82,"offset":1111},"end":{"line":41,"column":105,"offset":1134}}}],"position":{"start":{"line":41,"column":1,"offset":1030},"end":{"line":41,"column":105,"offset":1134}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아래와 같이 입력해보면?","position":{"start":{"line":43,"column":1,"offset":1136},"end":{"line":43,"column":14,"offset":1149}}}],"position":{"start":{"line":43,"column":1,"offset":1136},"end":{"line":43,"column":14,"offset":1149}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">some text(new \\n)\\n</code></pre></div>","position":{"start":{"line":45,"column":1,"offset":1151},"end":{"line":47,"column":4,"offset":1178}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"을 실행해봅시다.","position":{"start":{"line":48,"column":1,"offset":1179},"end":{"line":48,"column":10,"offset":1188}}}],"position":{"start":{"line":48,"column":1,"offset":1179},"end":{"line":48,"column":10,"offset":1188}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"여러 줄의 텍스트 사이에 줄바꿈을 하는 것이 아닌 끝 줄에서 버그를 발생시키면 다시 버그가 발생됩니다. ","position":{"start":{"line":50,"column":1,"offset":1190},"end":{"line":50,"column":59,"offset":1248}}}],"position":{"start":{"line":50,"column":1,"offset":1190},"end":{"line":50,"column":59,"offset":1248}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그래서 경우의 수를 하나 더 추가해서 해결합니다.","position":{"start":{"line":52,"column":1,"offset":1250},"end":{"line":52,"column":28,"offset":1277}}}],"position":{"start":{"line":52,"column":1,"offset":1250},"end":{"line":52,"column":28,"offset":1277}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">        let isEndOfString = NSMaxRange(rangeOfCharAfterCaret) &gt;= NSMaxRange(fullRange) &amp;&amp;\n            text.substring(with: rangeOfCharBeforeCaret) == &quot;\\n&quot;\n        </code></pre></div>","position":{"start":{"line":54,"column":1,"offset":1279},"end":{"line":58,"column":4,"offset":1450}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"전체 코드는 ","position":{"start":{"line":60,"column":1,"offset":1452},"end":{"line":60,"column":8,"offset":1459}}},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/Haeuncs/197e8dc11fad49528ed638526cc7beca"},"children":[{"type":"text","value":"Gist","position":{"start":{"line":60,"column":9,"offset":1460},"end":{"line":60,"column":13,"offset":1464}}}],"position":{"start":{"line":60,"column":8,"offset":1459},"end":{"line":60,"column":80,"offset":1531}}},{"type":"text","value":"에 올려두었습니다.","position":{"start":{"line":60,"column":80,"offset":1531},"end":{"line":60,"column":90,"offset":1541}}}],"position":{"start":{"line":60,"column":1,"offset":1452},"end":{"line":60,"column":90,"offset":1541}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":62,"column":1,"offset":1543}}}}