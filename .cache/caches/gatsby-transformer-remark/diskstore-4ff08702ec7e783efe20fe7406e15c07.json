{"expireTime":9007200848448406000,"key":"transformer-remark-markdown-html-ast-96ccfb9264aec629129aab35e0e04f43-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"1. 서론","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":8,"offset":8}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":8,"offset":8}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Swift 를 개발하면서 TextView의 textAlignment를 center로 사용해본 적이 없었기 때문에 이 버그를 이번에 처음 봤습니다.","position":{"start":{"line":4,"column":1,"offset":10},"end":{"line":4,"column":82,"offset":91}}}],"position":{"start":{"line":4,"column":1,"offset":10},"end":{"line":4,"column":82,"offset":91}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이슈 ticket을 받고 디버그를 찍어보고, playground 에서 demo 프로젝트를 만들면서 이 버그가 기본 버그라는 것을 알게 되었습니다.","position":{"start":{"line":6,"column":1,"offset":93},"end":{"line":6,"column":82,"offset":174}}}],"position":{"start":{"line":6,"column":1,"offset":93},"end":{"line":6,"column":82,"offset":174}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"버그는 쉽게 볼 수 있습니다.","position":{"start":{"line":8,"column":1,"offset":176},"end":{"line":8,"column":17,"offset":192}}}],"position":{"start":{"line":8,"column":1,"offset":176},"end":{"line":8,"column":17,"offset":192}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\">  \n<span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n<span class=\"token keyword\">import</span> <span class=\"token builtin\">PlaygroundSupport</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyViewController</span> <span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIViewController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">loadView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> view <span class=\"token operator\">=</span> <span class=\"token function\">UIView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        view<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>white\n\n        <span class=\"token keyword\">let</span> label <span class=\"token operator\">=</span> <span class=\"token function\">UITextView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        label<span class=\"token punctuation\">.</span>frame <span class=\"token operator\">=</span> <span class=\"token function\">CGRect</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">150</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        label<span class=\"token punctuation\">.</span>textAlignment <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>center\n        label<span class=\"token punctuation\">.</span>textColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>black\n        label<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>brown\n        \n        view<span class=\"token punctuation\">.</span><span class=\"token function\">addSubview</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">)</span>\n\n\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>view <span class=\"token operator\">=</span> view\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":10,"column":1,"offset":194},"end":{"line":34,"column":4,"offset":680}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기본 UITextView의 이미지처럼 2줄의 텍스트를 입력하고 1줄에서 줄바꿈을 하면?! 이렇게 cursor 위치가 center 가 아닌 left로 이동합니다.","position":{"start":{"line":36,"column":1,"offset":682},"end":{"line":36,"column":90,"offset":771}}}],"position":{"start":{"line":36,"column":1,"offset":682},"end":{"line":36,"column":90,"offset":771}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 버그를 구글링을 하다보면 가장 유명한 (애초에 버그 report가 몇 개 없음) ","position":{"start":{"line":38,"column":1,"offset":773},"end":{"line":38,"column":48,"offset":820}}},{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/26524431/uitextview-alignment-caret-goes-left/53295470#53295470"},"children":[{"type":"text","value":"stackoverflow","position":{"start":{"line":38,"column":49,"offset":821},"end":{"line":38,"column":62,"offset":834}}}],"position":{"start":{"line":38,"column":48,"offset":820},"end":{"line":38,"column":164,"offset":936}}},{"type":"text","value":"와 같은 해결 방법이 나옵니다.","position":{"start":{"line":38,"column":164,"offset":936},"end":{"line":38,"column":181,"offset":953}}}],"position":{"start":{"line":38,"column":1,"offset":773},"end":{"line":38,"column":181,"offset":953}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"해결 방법은 앞서 설명한 버그를 실행시키는 경우를 대비하여 작성된 코드인데 현재 상태를 판단해서 중앙으로 cursor 를 위치하게 하는 코드입니다.","position":{"start":{"line":40,"column":1,"offset":955},"end":{"line":40,"column":83,"offset":1037}}}],"position":{"start":{"line":40,"column":1,"offset":955},"end":{"line":40,"column":83,"offset":1037}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 fix 의 문제는 ","position":{"start":{"line":42,"column":1,"offset":1039},"end":{"line":42,"column":13,"offset":1051}}},{"type":"raw","value":"<code class=\"language-text\">NSLocationInRange(NSMaxRange(rangeOfCharAfterCaret), fullRange)</code>","position":{"start":{"line":42,"column":13,"offset":1051},"end":{"line":42,"column":82,"offset":1120}}},{"type":"text","value":" 를 사용해서 판단하는데 허점이 있습니다.","position":{"start":{"line":42,"column":82,"offset":1120},"end":{"line":42,"column":105,"offset":1143}}}],"position":{"start":{"line":42,"column":1,"offset":1039},"end":{"line":42,"column":105,"offset":1143}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아래와 같이 입력해보면?","position":{"start":{"line":44,"column":1,"offset":1145},"end":{"line":44,"column":14,"offset":1158}}}],"position":{"start":{"line":44,"column":1,"offset":1145},"end":{"line":44,"column":14,"offset":1158}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\">some <span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token punctuation\">\\</span>n</span><span class=\"token punctuation\">)</span>\\n</code></pre></div>","position":{"start":{"line":46,"column":1,"offset":1160},"end":{"line":48,"column":4,"offset":1192}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"여러 줄의 텍스트 사이에 줄바꿈을 하는 것이 아닌 끝 줄에서 버그를 발생시키면 다시 버그가 발생됩니다. ","position":{"start":{"line":50,"column":1,"offset":1194},"end":{"line":50,"column":59,"offset":1252}}}],"position":{"start":{"line":50,"column":1,"offset":1194},"end":{"line":50,"column":59,"offset":1252}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그래서 경우의 수를 하나 더 추가해서 해결합니다.","position":{"start":{"line":52,"column":1,"offset":1254},"end":{"line":52,"column":28,"offset":1281}}}],"position":{"start":{"line":52,"column":1,"offset":1254},"end":{"line":52,"column":28,"offset":1281}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\">        <span class=\"token keyword\">let</span> isEndOfString <span class=\"token operator\">=</span> <span class=\"token function\">NSMaxRange</span><span class=\"token punctuation\">(</span>rangeOfCharAfterCaret<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token function\">NSMaxRange</span><span class=\"token punctuation\">(</span>fullRange<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n            text<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>with<span class=\"token punctuation\">:</span> rangeOfCharBeforeCaret<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"\\n\"</span>\n        </code></pre></div>","position":{"start":{"line":54,"column":1,"offset":1283},"end":{"line":58,"column":4,"offset":1459}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"전체 코드는 ","position":{"start":{"line":60,"column":1,"offset":1461},"end":{"line":60,"column":8,"offset":1468}}},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/Haeuncs/197e8dc11fad49528ed638526cc7beca"},"children":[{"type":"text","value":"Gist","position":{"start":{"line":60,"column":9,"offset":1469},"end":{"line":60,"column":13,"offset":1473}}}],"position":{"start":{"line":60,"column":8,"offset":1468},"end":{"line":60,"column":80,"offset":1540}}},{"type":"text","value":"에 올려두었습니다.","position":{"start":{"line":60,"column":80,"offset":1540},"end":{"line":60,"column":90,"offset":1550}}}],"position":{"start":{"line":60,"column":1,"offset":1461},"end":{"line":60,"column":90,"offset":1550}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":62,"column":1,"offset":1552}}}}